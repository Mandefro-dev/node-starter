import express from "express"
import cors from "cors"
import dotenv from "dotenv"

<% if(dbType==="MongoDB"){ %>
    import mongoose from "mongoose";
<%} else if (dbType==="PostgreSQL"){%>
    import {Sequelize} from "sequelize"
    <% } %>

    dotenv.config()

const PORT=process.env.PORT||3000


const app=express()
app.use(cors())
app.use(express.join())

<% if (dbType === 'MongoDB') { %>
mongoose.connect(process.env.DB_URI as string)
  .then(() => console.log('ðŸŸ¢ Connected to MongoDB'))
  .catch(err => console.error('ðŸ”´ Mongo Error:', err));
<% } else if (dbType === 'PostgreSQL') { %>
// Sequelize init code would go here
console.log('ðŸ”µ Initializing PostgreSQL connection...');
<% } else { %>
console.log('âšª No database selected.');
<% } %>



app.get("/",(req,res)=>{

    res.status(200).json({
        message:"Welcome to <%= projectName %>",
        environment:process.env.NODE_ENV
    })
})


app.listen(PORT,()=>{
    console.log(`The server is connected to port ${PORT}`)
})